<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>GLORYFlow ‚Äî BJ GLORY LOGISTICS</title>
  <link rel="stylesheet" href="/static/styles.css">
</head>
<body>
<!-- Dashboard Sidebar -->
<aside class="sidebar">
  <div class="sidebar-brand">
    <div class="brand-icon">üì¶</div>
    <h1 class="brand-title">GLORYFlow</h1>
    <p class="brand-subtitle">BJ GLORY LOGISTICS</p>
  </div>
  <nav class="sidebar-nav">
    <a href="#" class="nav-item active" data-page="dossiers">
      <span class="nav-icon">[D]</span>
      <span>Dossiers</span>
    </a>
    <a href="#" class="nav-item" data-page="nouveau">
      <span class="nav-icon">[+]</span>
      <span>Nouveau dossier</span>
    </a>
    <a href="#" class="nav-item" data-page="risque">
      <span class="nav-icon">[!]</span>
      <span>Risque & Documents</span>
    </a>
    <a href="#" class="nav-item" data-page="containers">
      <span class="nav-icon">[C]</span>
      <span>Conteneurs</span>
    </a>
    <a href="#" class="nav-item" data-page="admin">
      <span class="nav-icon">[A]</span>
      <span>Clients & Compagnies maritimes</span>
    </a>
  </nav>
  <div class="sidebar-footer">
    <a href="https://portnet.ma" target="_blank" rel="noopener" class="portnet-link">
      <span class="portnet-icon">üåê</span>
      <span>Portnet Morocco</span>
    </a>
    <div class="sidebar-actions">
      <button id="seedBtn" class="btn-icon" title="Charger donn√©es d√©mo">üîÑ</button>
      <button id="toggleDensity" class="btn-icon" title="Mode compact">‚ö°</button>
      <button id="toggleFilters" class="btn-icon" title="Filtres">üîç</button>
    </div>
  </div>
</aside>

<!-- Filters Drawer -->
<div id="filtersDrawer" class="drawer" aria-hidden="true" role="dialog" aria-modal="true" aria-labelledby="filtersTitle">
  <div class="drawer-backdrop" data-close></div>
  <div class="drawer-panel">
    <div class="drawer-header">
      <h3 id="filtersTitle">Filtres</h3>
      <button class="ghost" id="closeFiltersBtn" aria-label="Fermer">‚úï</button>
    </div>
    <form id="filtersForm" class="drawer-body">
      <fieldset>
        <legend>Direction</legend>
        <label><input type="radio" name="direction" value="any" checked> Tous</label>
        <label><input type="radio" name="direction" value="import"> Import</label>
        <label><input type="radio" name="direction" value="export"> Export</label>
      </fieldset>
      <fieldset>
        <legend>Mode</legend>
        <label><input type="checkbox" name="mode" value="sea"> Mer</label>
        <label><input type="checkbox" name="mode" value="air"> Air</label>
        <label><input type="checkbox" name="mode" value="road"> Route</label>
      </fieldset>
      <fieldset>
        <legend>ETA</legend>
        <label>Du <input type="date" name="eta_min"></label>
        <label>Au <input type="date" name="eta_max"></label>
      </fieldset>
      <fieldset>
        <legend>Free days</legend>
        <label>Min <input type="number" name="fd_min" min="0"></label>
        <label>Max <input type="number" name="fd_max" min="0"></label>
      </fieldset>
      <div class="drawer-actions">
        <button type="button" id="clearFilters" class="ghost">R√©initialiser</button>
        <button type="submit">Appliquer</button>
      </div>
    </form>
  </div>
</div>

<!-- Main Dashboard Content -->
<main class="dashboard-main">
  <header class="dashboard-header">
    <div class="header-left">
      <h2 id="pageTitle">Dossiers</h2>
      <button id="refreshBtn" class="btn-refresh">üîÑ Actualiser</button>
    </div>
  </header>

  <!-- Page: Dossiers -->
  <div class="page active" id="page-dossiers">
    <section class="panel">
      <div class="panel-toolbar">
        <input id="searchInput" placeholder="Rechercher par r√©f√©rence, POL, POD‚Ä¶" class="search-input"/>
        <button id="clearSearch" class="ghost">Effacer</button>
      </div>
      <div class="table-container">
        <table id="shipmentsTable">
          <thead>
            <tr>
              <th>#</th><th>R√©f√©rence</th><th>Direction</th><th>Route</th><th>Client</th><th>Compagnie maritime</th><th>Nb conteneurs</th><th>ETA</th><th>Free days</th><th>Actions</th>
            </tr>
          </thead>
          <tbody></tbody>
        </table>
      </div>
    </section>
  </div>

  <!-- Page: Nouveau dossier -->
  <div class="page" id="page-nouveau">
    <section class="panel">
      <h3 class="section-title">Cr√©er un nouveau dossier</h3>
      <form id="createShipmentForm">
        <div class="form-grid">
          <label>R√©f√©rence <input name="reference" required placeholder="BJG-2025XXX"></label>
          <label>Direction 
            <select name="direction"><option>import</option><option>export</option></select>
          </label>
          <label>Mode
            <select name="mode"><option>sea</option><option>air</option><option>road</option></select>
          </label>
          <label>Client
            <select name="client_id" id="clientSelect" required>
              <option value="">-- S√©lectionner --</option>
            </select>
          </label>
          <label>Compagnie maritime
            <select name="shipping_line_id" id="shippingLineSelect" required>
              <option value="">-- S√©lectionner --</option>
            </select>
          </label>
          <label>Incoterm <input name="incoterm" placeholder="FOB/CIF/EXW"></label>
          <label>POL <input name="pol" placeholder="Shanghai"></label>
          <label>POD <input name="pod" placeholder="Casablanca"></label>
          <label>Navire <input name="vessel" placeholder="MSC Zoe"></label>
          <label>ETA <input name="eta" type="date" required></label>
          <label>Free days <input name="free_days" type="number" value="7" min="0"></label>
        </div>
        <button type="submit" class="btn-primary">Cr√©er le dossier</button>
      </form>
    </section>
  </div>

  <!-- Page: Risque & Documents -->
  <div class="page" id="page-risque">
    <div class="risk-layout">
      <section class="panel">
        <h3 class="section-title">Risque de surestaries</h3>
        <div id="riskContent" class="content-box"><p>S√©lectionnez un dossier dans la page <strong>Dossiers</strong> puis cliquez <em>Risque</em>.</p></div>
      </section>
      <section class="panel">
        <h3 class="section-title">Documents (BL, Invoice, Packing List)</h3>
        <div id="docsContent" class="content-box"><p>S√©lectionnez un dossier puis cliquez <em>Docs</em>.</p></div>
      </section>
      </div>
  </div>

  <!-- Page: Conteneurs -->
  <div class="page" id="page-containers">
    <section class="panel">
      <h3 class="section-title">Conteneurs</h3>
      <form id="addContainerForm" class="form-inline">
        <input type="number" name="shipment_id" placeholder="Shipment ID" required min="1">
        <input name="code" placeholder="MSCU1234567" required>
        <input name="size" placeholder="40HC" required>
        <button type="submit" class="btn-primary">Ajouter</button>
      </form>
      <div class="table-container">
        <table id="containersTable">
          <thead>
            <tr><th>ID</th><th>Shipment</th><th>Code</th><th>Taille</th><th>Status</th><th>Actions</th></tr>
          </thead>
          <tbody></tbody>
        </table>
      </div>
    </section>
  </div>
  <!-- Page: Administration -->
  <div class="page" id="page-admin">
    <div class="admin-layout">
      <section class="panel">
        <h3 class="section-title">Clients</h3>
        <form id="addClientForm" class="form-inline">
          <input name="name" placeholder="Nom du client" required>
          <input name="email" placeholder="Email">
          <input name="phone" placeholder="T√©l√©phone">
          <button type="submit">Ajouter</button>
        </form>
        <div class="table-container">
          <table id="clientsTable">
            <thead>
              <tr><th>Nom</th><th>Email</th><th>T√©l√©phone</th><th>Actions</th></tr>
            </thead>
            <tbody></tbody>
          </table>
        </div>
      </section>
      <section class="panel">
        <h3 class="section-title">Compagnies maritimes</h3>
        <form id="addShippingLineForm" class="form-inline">
          <input name="name" placeholder="Nom de la compagnie" required>
          <input name="email" placeholder="Email">
          <input name="phone" placeholder="T√©l√©phone">
          <button type="submit">Ajouter</button>
        </form>
        <div class="table-container">
          <table id="shippingLinesTable">
            <thead>
              <tr><th>Nom</th><th>Email</th><th>T√©l√©phone</th><th>Actions</th></tr>
            </thead>
            <tbody></tbody>
          </table>
        </div>
      </section>
    </div>
  </div>
</main>

<!-- Modal: Edit shipment -->
<div id="editShipmentModal" class="modal" aria-hidden="true" role="dialog" aria-modal="true" aria-labelledby="editShipmentTitle">
  <div class="modal-backdrop" data-close></div>
  <div class="modal-card" role="document">
    <div class="modal-header">
      <h3 id="editShipmentTitle">Modifier un dossier</h3>
      <button class="ghost" id="closeEditShipmentBtn" aria-label="Fermer">‚úï</button>
    </div>
    <form id="editShipmentForm" class="modal-body">
      <input type="hidden" name="id" id="editShipmentId">
      <label>R√©f√©rence <input name="reference" id="editReference" required></label>
      <label>Direction 
        <select name="direction" id="editDirection"><option>import</option><option>export</option></select>
      </label>
      <label>Mode
        <select name="mode" id="editMode"><option>sea</option><option>air</option><option>road</option></select>
      </label>
      <label>Incoterm <input name="incoterm" id="editIncoterm"></label>
      <label>POL <input name="pol" id="editPol"></label>
      <label>POD <input name="pod" id="editPod"></label>
      <label>Navire <input name="vessel" id="editVessel"></label>
      <label>ETA <input name="eta" id="editEta" type="date" required></label>
      <label>Free days <input name="free_days" id="editFreeDays" type="number" min="0"></label>
      <div class="modal-actions">
        <button type="button" class="ghost" id="cancelEditShipmentBtn">Annuler</button>
        <button type="submit">Enregistrer</button>
      </div>
    </form>
  </div>
</div>

<!-- Modal: Edit container -->
<div id="editContainerModal" class="modal" aria-hidden="true" role="dialog" aria-modal="true" aria-labelledby="editContainerTitle">
  <div class="modal-backdrop" data-close></div>
  <div class="modal-card" role="document">
    <div class="modal-header">
      <h3 id="editContainerTitle">Modifier un conteneur</h3>
      <button class="ghost" id="closeEditContainerBtn" aria-label="Fermer">x</button>
    </div>
    <form id="editContainerForm" class="modal-body">
      <input type="hidden" name="id" id="editContainerId">
      <label>Shipment ID <input type="number" name="shipment_id" id="editContainerShipmentId" required></label>
      <label>Code <input name="code" id="editContainerCode" required></label>
      <label>Taille <input name="size" id="editContainerSize" required></label>
      <label>Status
        <select name="status" id="editContainerStatus">
          <option>full</option><option>empty</option><option>released</option><option>gate_out</option>
        </select>
      </label>
      <div class="modal-actions">
        <button type="button" class="ghost" id="cancelEditContainerBtn">Annuler</button>
        <button type="submit">Enregistrer</button>
      </div>
    </form>
  </div>
</div>

<!-- Footer kept at bottom inside main flex container -->
<footer class="dashboard-footer"><small>Prototype acad√©mique ‚Äî ENSEM ‚Ä¢ GLORYFlow</small></footer>
<script src="/static/app.js"></script>
</body></html>
